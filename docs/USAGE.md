# ä½¿ç”¨è¯´æ˜

ğŸŒ **Language / è¯­è¨€**: [English](USAGE_EN.md) | [ä¸­æ–‡ç®€ä½“](USAGE.md)

## å‰ææ¡ä»¶

åœ¨ä½¿ç”¨æœ¬å·¥å…·ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²ç»ï¼š

1. å®‰è£…äº†æ”¯æŒçš„ä»£ç†å·¥å…·ï¼ˆSurge æˆ– Shadowrocketï¼‰
2. äº†è§£åŸºæœ¬çš„ä»£ç†é…ç½®æ–¹æ³•
3. å·²é˜…è¯»å¹¶ç†è§£ç›¸å…³é£é™©å’Œå…è´£å£°æ˜

## æ”¯æŒçš„ä»£ç†å·¥å…·

### Surge (æ¨è)
- **å¹³å°**: iOS, macOS  
- **ç‰ˆæœ¬è¦æ±‚**: Surge 4.0+
- **é…ç½®æ–‡ä»¶**: `config/surge.conf`

### Shadowrocket
- **å¹³å°**: iOS
- **ç‰ˆæœ¬è¦æ±‚**: 2.1.90+
- **é…ç½®æ–‡ä»¶**: `config/shadowrocket.conf`

## é…ç½®æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šå®Œæ•´é…ç½®æ–‡ä»¶å¯¼å…¥

1. ä¸‹è½½å¯¹åº”çš„é…ç½®æ–‡ä»¶
2. åœ¨ä»£ç†å·¥å…·ä¸­å¯¼å…¥é…ç½®æ–‡ä»¶
3. å¯ç”¨MITMåŠŸèƒ½
4. å®‰è£…å¹¶ä¿¡ä»»è¯ä¹¦

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ·»åŠ é…ç½®

#### Surgeé…ç½®

1. æ‰“å¼€Surgeé…ç½®æ–‡ä»¶
2. åœ¨`[Script]`éƒ¨åˆ†æ·»åŠ ï¼š
```
ngmarket = type=http-request,pattern=^https://cart.production.store-web.dynamics.com/v\d+\.\d+/cart/loadCart,requires-body=1,max-size=0,binary-body-mode=0,timeout=90,script-path=https://raw.githubusercontent.com/theslugger/xboxngn/refs/heads/main/xboxng/ngmarket.js,script-update-interval=0

getcartid = type=http-response,pattern=^https://cart.production.store-web.dynamics.com/v\d+\.\d+/cart/loadCart,requires-body=1,max-size=0,binary-body-mode=0,timeout=90,script-path=https://raw.githubusercontent.com/theslugger/xboxngn/refs/heads/main/xboxng/getcartid.js,script-update-interval=0

buy = type=http-request,pattern=^https://cart.production.store-web.dynamics.com/v\d+\.\d+/Cart/RequestParentalApproval,requires-body=1,max-size=0,binary-body-mode=0,timeout=90,script-path=https://raw.githubusercontent.com/theslugger/xboxngn/refs/heads/main/xboxng/buy.js,script-update-interval=0
```

3. åœ¨`[URL Rewrite]`éƒ¨åˆ†æ·»åŠ ï¼š
```
^https://www\.microsoft\.com/store/purchase/purchaseui/(cart|checkout)\?.*market=[^&]*.* https://www.microsoft.com/store/purchase/purchaseui/$1?market=NG 302
```

4. åœ¨`[MITM]`éƒ¨åˆ†æ·»åŠ ï¼š
```
hostname = %APPEND% *.microsoft.com, *.dynamics.com
```

#### Shadowrocketé…ç½®

ç±»ä¼¼åœ°å°†å¯¹åº”é…ç½®æ·»åŠ åˆ°Shadowrocketé…ç½®æ–‡ä»¶ä¸­ã€‚

## ä½¿ç”¨æµç¨‹

### ç¬¬ä¸€æ­¥ï¼šè®¿é—®Xboxå•†åº—
1. æ‰“å¼€Xboxå®˜ç½‘æˆ–åº”ç”¨
2. æµè§ˆå°¼æ—¥åˆ©äºšå¸‚åœºçš„æ¸¸æˆ
3. é€‰æ‹©è¦è´­ä¹°çš„æ¸¸æˆ

### ç¬¬äºŒæ­¥ï¼šæ·»åŠ åˆ°è´­ç‰©è½¦
1. ç‚¹å‡»"æ·»åŠ åˆ°è´­ç‰©è½¦"
2. å·¥å…·ä¼šè‡ªåŠ¨æ‹¦æˆªå¹¶ä¿®æ”¹è¯·æ±‚
3. è§‚å¯Ÿä»£ç†å·¥å…·çš„æ—¥å¿—ç¡®è®¤è„šæœ¬è¿è¡Œ

### ç¬¬ä¸‰æ­¥ï¼šè·å–Cart ID
1. æ‰“å¼€è´­ç‰©è½¦é¡µé¢
2. å·¥å…·ä¼šè‡ªåŠ¨æå–å¹¶å­˜å‚¨Cart ID
3. ä¼šæ”¶åˆ°è·å–æˆåŠŸçš„é€šçŸ¥

### ç¬¬å››æ­¥ï¼šå®Œæˆè´­ä¹°
1. è¿›è¡Œç»“è´¦æ“ä½œ
2. å·¥å…·ä¼šè‡ªåŠ¨ä½¿ç”¨å­˜å‚¨çš„Cart ID
3. å®Œæˆè´­ä¹°æµç¨‹

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. è„šæœ¬ä¸æ‰§è¡Œ
**å¯èƒ½åŸå› **ï¼š
- MITMæœªæ­£ç¡®é…ç½®
- åŸŸåæœªæ·»åŠ åˆ°MITMåˆ—è¡¨
- è¯ä¹¦æœªå®‰è£…æˆ–ä¿¡ä»»

**è§£å†³æ–¹æ³•**ï¼š
- é‡æ–°é…ç½®MITM
- æ£€æŸ¥åŸŸåé…ç½®
- é‡æ–°å®‰è£…è¯ä¹¦

#### 2. è´­ç‰©è½¦IDè·å–å¤±è´¥
**å¯èƒ½åŸå› **ï¼š
- ç½‘ç»œå“åº”æ ¼å¼å˜åŒ–
- è„šæœ¬è·¯å¾„é”™è¯¯

**è§£å†³æ–¹æ³•**ï¼š
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æ›´æ–°è„šæœ¬ç‰ˆæœ¬
- æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

#### 3. è´­ä¹°æ—¶IDæ›¿æ¢å¤±è´¥
**å¯èƒ½åŸå› **ï¼š
- æ²¡æœ‰å­˜å‚¨çš„Cart ID
- è¯·æ±‚æ ¼å¼å˜åŒ–

**è§£å†³æ–¹æ³•**ï¼š
- é‡æ–°è·å–Cart ID
- æ£€æŸ¥è„šæœ¬æ›´æ–°

### è°ƒè¯•æ–¹æ³•

1. **æŸ¥çœ‹ä»£ç†æ—¥å¿—**
   - Surge: é¦–é¡µ â†’ æœ€è¿‘è¯·æ±‚
   - Shadowrocket: æ—¥å¿— â†’ æœ€è¿‘æ´»åŠ¨

2. **æ£€æŸ¥è„šæœ¬æ‰§è¡Œ**
   - è§‚å¯Ÿæ˜¯å¦æœ‰è„šæœ¬æ‰§è¡Œè®°å½•
   - æ£€æŸ¥é”™è¯¯ä¿¡æ¯

3. **éªŒè¯MITMé…ç½®**
   - ç¡®è®¤åŸŸåå·²æ·»åŠ 
   - éªŒè¯è¯ä¹¦å·²ä¿¡ä»»

## é«˜çº§é…ç½®

### è‡ªå®šä¹‰è„šæœ¬è·¯å¾„

å¦‚æœæ‚¨æƒ³ä½¿ç”¨æœ¬åœ°è„šæœ¬æ–‡ä»¶ï¼Œå¯ä»¥å°†script-pathä¿®æ”¹ä¸ºæœ¬åœ°è·¯å¾„ï¼š
```
script-path=/path/to/your/script.js
```

### è°ƒæ•´è¶…æ—¶æ—¶é—´

é»˜è®¤è¶…æ—¶æ—¶é—´ä¸º90ç§’ï¼Œæ‚¨å¯ä»¥æ ¹æ®ç½‘ç»œæƒ…å†µè°ƒæ•´ï¼š
```
timeout=120
```

### å¯ç”¨è°ƒè¯•æ¨¡å¼

åœ¨è„šæœ¬ä¸­æ·»åŠ æ›´å¤šæ—¥å¿—è¾“å‡ºæ¥è°ƒè¯•é—®é¢˜ã€‚

## å®‰å…¨æ³¨æ„äº‹é¡¹

1. **è¯ä¹¦å®‰å…¨**ï¼šåªä¿¡ä»»æ¥æºå¯é çš„è¯ä¹¦
2. **é…ç½®å¤‡ä»½**ï¼šå®šæœŸå¤‡ä»½æ‚¨çš„ä»£ç†é…ç½®
3. **æ›´æ–°æ£€æŸ¥**ï¼šå®šæœŸæ£€æŸ¥è„šæœ¬æ›´æ–°
4. **ä½¿ç”¨ç›‘æ§**ï¼šæ³¨æ„ä»£ç†å·¥å…·çš„èµ„æºä½¿ç”¨æƒ…å†µ

## æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æŒ‰ä»¥ä¸‹é¡ºåºå¯»æ±‚å¸®åŠ©ï¼š

1. æŸ¥é˜…æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥GitHub Issuesä¸­æ˜¯å¦æœ‰ç±»ä¼¼é—®é¢˜
3. æäº¤æ–°çš„Issueå¹¶æä¾›è¯¦ç»†ä¿¡æ¯ï¼š
   - ä½¿ç”¨çš„ä»£ç†å·¥å…·å’Œç‰ˆæœ¬
   - é”™è¯¯æ—¥å¿—
   - æ“ä½œæ­¥éª¤
   - é¢„æœŸç»“æœå’Œå®é™…ç»“æœ 